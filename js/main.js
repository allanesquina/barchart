!function(){"use strict";function t(t){var a=new Date(t.date);o=o||d3.select("#tooltip"),d=d||o.select("#t-date"),s=s||o.select("#t-amount"),o.attr("style","transform: translate("+(d3.event.layerX-50)+"px, 0)"),d.text(a.toDateString().split(" ")[0]+" "+(a.getUTCMonth()+1)+"/"+a.getUTCDate()),s.text((t.value/100).toLocaleString("en-US",{style:"currency",currency:"USD"})),o.attr("class","show")}function a(){o.attr("class","")}function e(t,a){var e=0,n=!1;a.map(function(a){return a.month===t?(n=!0,e):void(e+=1)});return n?e:!1}function n(t){return t=t.reduce(function(t,a,n){var r,a={date:a.date.split("-"),am:a.amount},o={};return i===a.date[0]&&(r=e(a.date[1],t),r||0===r?t[r]["d_"+ +a.date[2]]=a.am:(o.month=a.date[1],o["d_"+ +a.date[2]]=a.am,t.push(o))),t},[]),c=d3.keys(t[0]).filter(function(t){return"month"!==t}),"d_31"in c||c.push("d_31"),t.forEach(function(t){t.days=c.map(function(a){return{name:a,value:+t[a],date:i+"-"+t.month+"-"+a.substr(2)}})}),t}function r(e){v.domain(e.map(function(t){return t.month})),y.domain(c).rangeRoundBands([0,v.rangeBand()]),x.domain([0,d3.max(e,function(t){return d3.max(t.days,function(t){return t.value})})]);var n=w.selectAll(".month").data(e).enter().append("g").attr("class","month").attr("transform",function(t){return b=g?0:b+(u?42:50),g=!1,u="d_31"in t,"translate("+(v(t.month)-b)+",0)"});n.selectAll("rect").data(function(t){return t.days}).enter().append("rect").attr("width",y.rangeBand()).attr("class","bar").attr("x",function(t){return y(t.name)}).attr("y",function(t){return x(t.value)}).attr("height",function(t){return p-x(t.value)}).on("mouseover",function(a){t(a)}).on("mouseout",function(t){a()}),n.append("g").attr("width",v.rangeBand()).attr("height",50).attr("id","label").attr("transform","translate(5,"+(p+15)+")").append("rect").attr("width",v.rangeBand()).attr("height",2).attr("class","label-border").attr("transform","translate(0,-15)"),l=n.select("#label"),l.append("text").text(function(t){return f[t.month-1].toUpperCase()}).attr("class","label-text").attr("transform","translate(15,3)"),l.append("rect").attr("width",2).attr("class","label-border").attr("height",20).attr("transform","translate(0,-12)")}var o,d,s,u,l,c,i="2015",f=["January","February","March","April","May","June","July","August","September","October","November","December"],m={top:20,right:20,bottom:30,left:40},h=960-m.left-m.right,p=200-m.top-m.bottom,g=!0,b=0,v=d3.scale.ordinal().rangeRoundBands([0,h],.1),y=d3.scale.ordinal(),x=d3.scale.linear().range([p,0]),w=d3.select("body").append("svg").attr("width",h+m.left+m.right).attr("height",p+m.top+m.bottom).append("g").attr("transform","translate("+m.left+","+m.top+")");d3.json("https://gist.githubusercontent.com/gaprl/2859ae8bee6c934fa6f2/raw/4c941829885c73141f4b1053f49190dd67f4303e/data.json",function(t,a){t||r(n(a))})}();